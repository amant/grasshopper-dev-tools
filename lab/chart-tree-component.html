<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Hello world</title>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/node-uuid/1.4.8/uuid.js"></script>
</head>
<body>
<component-tree-chart></component-tree-chart>

<script type="module">
  // import {html, render, LitElement} from 'https://unpkg.com/lit-html?module';
  import { LitElement, html, css } from 'https://unpkg.com/lit-element?module';

  const DURATION = 750;

  // Collapse the node and all it's children
  function collapse(d) {
    if (d.children) {
      d._children = d.children;
      d._children.forEach(collapse);
      d.children = null;
    }
  }

  // Creates a curved (diagonal) path from parent to the child nodes
  function diagonal(s, d) {
    return `M ${ s.y } ${ s.x }
            C ${ (s.y + d.y) / 2 } ${ s.x },
              ${ (s.y + d.y) / 2 } ${ d.x },
              ${ d.y } ${ d.x }`;
  }

  // Add Circle for the nodes
  function addCircle(nodeEnter, source) {
    return nodeEnter
      .append('circle')
      .attr('class', (d) => {
        const list = ['node'];
        if (d.data.inShadow) {
          list.push('shadow');
        }
        return list.join(' ')
      })
      .attr('r', 1e-6)
      .style('fill', d => d._children ? 'lightsteelblue' : '#fff');
  }

  // Add labels for the nodes
  function addText(nodeEnter) {
    return nodeEnter.append('text')
      .attr('dy', '.35em')
      .attr('x', d => d.children || d._children ? -13 : 13)
      .attr('text-anchor', d => d.children || d._children ? 'end' : 'start')
      .text(d => d.data.nodeName);
  }

  function renderChart({ treeData, parentElement, width, height, margin }) {
    // declares a tree layout and assigns the size
    const treemap = d3.tree().size([height, width]);

    // append the svg object to the body of the page
    // appends a 'group' element to 'svg'
    // moves the 'group' element to the top left margin
    const svg = d3.select(parentElement)
      .append('svg')
      .attr('width', '100%')
      .attr('height', height + margin.top + margin.bottom)
      .attr('style', 'border: 1px solid blue;')
      .call(d3
        .zoom()
        .on('zoom', () => {
          if (d3.event.transform.x < 10 && d3.event.transform.y < 10) return;
          svg.attr('transform', d3.event.transform)
        }))
      .on("dblclick.zoom", null)
      .append('g')
      .attr('transform', `translate(${ margin.left },${ margin.top })`);

    // Assigns parent, children, height, depth
    const root = d3.hierarchy(treeData, d => d.children);
    root.x0 = height / 2;
    root.y0 = 0;

    // Collapse after the second level
    root.children.forEach(collapse);

    update(root);

    function update(source) {
      // Assigns the x and y position for the nodes
      const treeMapData = treemap(root);

      // Compute the new tree layout.
      const nodes = updateNodes(treeMapData, source);
      updateLinks(treeMapData, source);

      // Store the old positions for transition.
      nodes.forEach(d => {
        d.x0 = d.x;
        d.y0 = d.y;
      });
    }

    function updateNodes(treeMapData, source) {
      const nodes = treeMapData.descendants();

      // Normalize for fixed-depth.
      nodes.forEach(d => {
        d.y = d.depth * 180
      });

      // Update the nodes...
      const node = svg
        .selectAll('g.node')
        .data(nodes, d => d.id || (d.id = uuid()));

      // Enter any new modes at the parent's previous position.
      const nodeEnter = node
        .enter()
        .append('g')
        .attr('class', 'node')
        .attr('transform', () => source ? `translate(${ source.y0 },${ source.x0 })` : null)
        .on('click', clickHandler);

      addCircle(nodeEnter, source);
      addText(nodeEnter);

      // UPDATE
      const nodeUpdate = nodeEnter.merge(node);

      // Transition to the proper position for the node
      nodeUpdate
        .transition()
        .duration(DURATION)
        .attr('transform', d => `translate(${ d.y },${ d.x })`);

      // Update the node attributes and style
      nodeUpdate
        .select('circle.node')
        .attr('r', 10)
        .style('fill', d => d._children ? 'lightsteelblue' : '#fff')
        .attr('cursor', 'pointer')
        .attr('class', (d) => {
          return d.id === source.id ? 'node selected' : 'node';
        });

      // Remove any exiting nodes
      const nodeExit = node
        .exit()
        .transition()
        .duration(DURATION)
        .attr('transform', () => source ? `translate(${ source.y },${ source.x })` : null)
        .remove();

      // On exit reduce the node circles size to 0
      nodeExit
        .select('circle')
        .attr('r', 1e-6);

      // On exit reduce the opacity of text labels
      nodeExit
        .select('text')
        .style('fill-opacity', 1e-6);

      return nodes;
    }

    function updateLinks(treeMapData, source) {
      const links = treeMapData.descendants().slice(1);

      // Update the links...
      const link = svg
        .selectAll('path.link')
        .data(links, d => d.id);

      // Enter any new links at the parent's previous position.
      const linkEnter = link
        .enter()
        .insert('path', 'g')
        .attr('class', 'link')
        .attr('d', () => {
          if (source) {
            var o = { x: source.x0, y: source.y0 };
            return diagonal(o, o)
          }
        });

      // UPDATE
      const linkUpdate = linkEnter.merge(link);

      // Transition back to the parent element position
      linkUpdate
        .transition()
        .duration(DURATION)
        .attr('d', d => diagonal(d, d.parent));

      // Remove any exiting links
      link
        .exit()
        .transition()
        .duration(DURATION)
        .attr('d', () => {
          if (source) {
            const o = { x: source.x, y: source.y };
            return diagonal(o, o);
          }
        })
        .remove();

      return links;
    }

    // Toggle children on click.
    function clickHandler(d) {
      if (d.children) {
        d._children = d.children;
        d.children = null;
      } else {
        d.children = d._children;
        d._children = null;
      }

      update(d);
    }
  }

  class ComponentTreeChart extends LitElement {
    static get styles() {
      return [css`
        .node circle {
          fill: #fff;
          stroke: steelblue;
          stroke-width: 2px;
        }

        .node circle.shadow {
          stroke-dasharray: 2;
        }

        .node circle.selected {
          stroke-width: 4px;
        }

        .node text {
          font: 12px sans-serif;
        }

        .link {
          fill: none;
          stroke: #ccc;
          stroke-width: 2px;
        }
      `];
    }

    static get properties() {
      return {
        data: { type: String },
      };
    }

    constructor() {
      super();
      this.data = {
        nodeName: 'body',
        children: [
          {
            "inShadow": false,
            "nodeName": "user-card",
            "id": "",
            "classList": [],
            "ownIndex": 0,
            "children": [{
              "inShadow": true,
              "nodeName": "div",
              "id": "",
              "classList": [],
              "ownIndex": 0,
              "children": [{
                "inShadow": false,
                "nodeName": "slot",
                "id": "",
                "classList": [],
                "name": "username",
                "ownIndex": 0,
                "children": [{
                  "inShadow": false,
                  "nodeName": "span",
                  "id": "",
                  "classList": [],
                  "ownIndex": 0,
                  "children": [],
                  "_ref": "[0].children.[0].children.[0].children.[0]",
                  "_selector": "body>user-card:nth-child(1)>::shadowroot>div:nth-child(1)>slot:nth-child(1)>span:nth-child(1)"
                }, {
                  "inShadow": false,
                  "nodeName": "div",
                  "id": "",
                  "classList": [],
                  "ownIndex": 1,
                  "children": [],
                  "_ref": "[0].children.[0].children.[0].children.[1]",
                  "_selector": "body>user-card:nth-child(1)>::shadowroot>div:nth-child(1)>slot:nth-child(1)>div:nth-child(2)"
                }],
                "_ref": "[0].children.[0].children.[0]",
                "_selector": "body>user-card:nth-child(1)>::shadowroot>div:nth-child(1)>slot:nth-child(1)"
              }],
              "_ref": "[0].children.[0]",
              "_selector": "body>user-card:nth-child(1)>::shadowroot>div:nth-child(1)"
            }, {
              "inShadow": true,
              "nodeName": "div",
              "id": "",
              "classList": [],
              "ownIndex": 1,
              "children": [{
                "inShadow": false,
                "nodeName": "slot",
                "id": "",
                "classList": [],
                "name": "birthday",
                "ownIndex": 0,
                "children": [{
                  "inShadow": false,
                  "nodeName": "span",
                  "id": "",
                  "classList": [],
                  "ownIndex": 2,
                  "children": [],
                  "_ref": "[0].children.[1].children.[0].children.[0]",
                  "_selector": "body>user-card:nth-child(1)>::shadowroot>div:nth-child(2)>slot:nth-child(1)>span:nth-child(3)"
                }],
                "_ref": "[0].children.[1].children.[0]",
                "_selector": "body>user-card:nth-child(1)>::shadowroot>div:nth-child(2)>slot:nth-child(1)"
              }],
              "_ref": "[0].children.[1]",
              "_selector": "body>user-card:nth-child(1)>::shadowroot>div:nth-child(2)"
            }],
            "_ref": "[0]",
            "_selector": "body>user-card:nth-child(1)"
          },
          {
            "inShadow": false, "nodeName": "div", "id": "container", "classList": [], "ownIndex": 1, "children": [{
              "inShadow": false, "nodeName": "div", "id": "", "classList": ["app"], "ownIndex": 0, "children": [{
                "inShadow": false,
                "nodeName": "div",
                "id": "",
                "classList": ["header"],
                "ownIndex": 0,
                "children": [{
                  "inShadow": false,
                  "nodeName": "div",
                  "id": "",
                  "classList": ["logo"],
                  "ownIndex": 0,
                  "children": [],
                  "_ref": "[1].children.[0].children.[0].children.[0]",
                  "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)"
                }, {
                  "inShadow": false,
                  "nodeName": "span",
                  "id": "",
                  "classList": ["message-container"],
                  "ownIndex": 1,
                  "children": [{
                    "inShadow": false,
                    "nodeName": "span",
                    "id": "",
                    "classList": ["message"],
                    "ownIndex": 0,
                    "children": [{
                      "inShadow": false,
                      "nodeName": "span",
                      "id": "",
                      "classList": ["text"],
                      "ownIndex": 0,
                      "children": [],
                      "_ref": "[1].children.[0].children.[0].children.[1].children.[0].children.[0]",
                      "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>span:nth-child(2)>span:nth-child(1)>span:nth-child(1)"
                    }],
                    "_ref": "[1].children.[0].children.[0].children.[1].children.[0]",
                    "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>span:nth-child(2)>span:nth-child(1)"
                  }],
                  "_ref": "[1].children.[0].children.[0].children.[1]",
                  "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>span:nth-child(2)"
                }, {
                  "inShadow": false,
                  "nodeName": "div",
                  "id": "",
                  "classList": ["actions"],
                  "ownIndex": 2,
                  "children": [{
                    "inShadow": false,
                    "nodeName": "div",
                    "id": "",
                    "classList": ["ui-group"],
                    "ownIndex": 0,
                    "children": [{
                      "inShadow": false,
                      "nodeName": "div",
                      "id": "",
                      "classList": ["content-wrapper"],
                      "ownIndex": 0,
                      "children": [{
                        "inShadow": false,
                        "nodeName": "div",
                        "id": "",
                        "classList": ["content"],
                        "ownIndex": 0,
                        "children": [{
                          "inShadow": false,
                          "nodeName": "button",
                          "id": "",
                          "classList": [],
                          "name": "",
                          "ownIndex": 0,
                          "children": [],
                          "_ref": "[1].children.[0].children.[0].children.[2].children.[0].children.[0].children.[0].children.[0]",
                          "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(3)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>button:nth-child(1)"
                        }, {
                          "inShadow": false,
                          "nodeName": "button",
                          "id": "",
                          "classList": [],
                          "name": "",
                          "ownIndex": 1,
                          "children": [],
                          "_ref": "[1].children.[0].children.[0].children.[2].children.[0].children.[0].children.[0].children.[1]",
                          "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(3)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>button:nth-child(2)"
                        }, {
                          "inShadow": false,
                          "nodeName": "button",
                          "id": "",
                          "classList": [],
                          "name": "",
                          "ownIndex": 2,
                          "children": [],
                          "_ref": "[1].children.[0].children.[0].children.[2].children.[0].children.[0].children.[0].children.[2]",
                          "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(3)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>button:nth-child(3)"
                        }, {
                          "inShadow": false,
                          "nodeName": "button",
                          "id": "",
                          "classList": [],
                          "name": "",
                          "ownIndex": 3,
                          "children": [],
                          "_ref": "[1].children.[0].children.[0].children.[2].children.[0].children.[0].children.[0].children.[3]",
                          "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(3)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>button:nth-child(4)"
                        }, {
                          "inShadow": false,
                          "nodeName": "button",
                          "id": "",
                          "classList": [],
                          "name": "",
                          "ownIndex": 4,
                          "children": [],
                          "_ref": "[1].children.[0].children.[0].children.[2].children.[0].children.[0].children.[0].children.[4]",
                          "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(3)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>button:nth-child(5)"
                        }],
                        "_ref": "[1].children.[0].children.[0].children.[2].children.[0].children.[0].children.[0]",
                        "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(3)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)"
                      }],
                      "_ref": "[1].children.[0].children.[0].children.[2].children.[0].children.[0]",
                      "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(3)>div:nth-child(1)>div:nth-child(1)"
                    }],
                    "_ref": "[1].children.[0].children.[0].children.[2].children.[0]",
                    "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(3)>div:nth-child(1)"
                  }],
                  "_ref": "[1].children.[0].children.[0].children.[2]",
                  "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(3)"
                }],
                "_ref": "[1].children.[0].children.[0]",
                "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)"
              }, {
                "inShadow": false,
                "nodeName": "div",
                "id": "",
                "classList": ["container"],
                "ownIndex": 1,
                "children": [{
                  "inShadow": false,
                  "nodeName": "div",
                  "id": "",
                  "classList": ["split-pane", "vertical"],
                  "ownIndex": 0,
                  "children": [{
                    "inShadow": false,
                    "nodeName": "div",
                    "id": "",
                    "classList": ["left", "top"],
                    "ownIndex": 0,
                    "children": [{
                      "inShadow": false,
                      "nodeName": "div",
                      "id": "",
                      "classList": ["scroll-pane"],
                      "ownIndex": 0,
                      "children": [{
                        "inShadow": false,
                        "nodeName": "div",
                        "id": "",
                        "classList": ["header"],
                        "ownIndex": 0,
                        "children": [{
                          "inShadow": false,
                          "nodeName": "div",
                          "id": "",
                          "classList": ["action-header"],
                          "ownIndex": 0,
                          "children": [{
                            "inShadow": false,
                            "nodeName": "input",
                            "id": "",
                            "classList": ["search"],
                            "name": "",
                            "ownIndex": 0,
                            "children": [],
                            "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[0].children.[0].children.[0]",
                            "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>input:nth-child(1)"
                          }],
                          "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[0].children.[0]",
                          "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)"
                        }],
                        "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[0]",
                        "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)"
                      }, {
                        "inShadow": false,
                        "nodeName": "div",
                        "id": "",
                        "classList": ["scroll"],
                        "ownIndex": 1,
                        "children": [{
                          "inShadow": false,
                          "nodeName": "div",
                          "id": "",
                          "classList": ["tree"],
                          "ownIndex": 0,
                          "children": [{
                            "inShadow": false,
                            "nodeName": "ul",
                            "id": "myUL",
                            "classList": [],
                            "ownIndex": 0,
                            "children": [{
                              "inShadow": false,
                              "nodeName": "li",
                              "id": "",
                              "classList": [],
                              "ownIndex": 0,
                              "children": [{
                                "inShadow": false,
                                "nodeName": "span",
                                "id": "",
                                "classList": ["caret"],
                                "ownIndex": 0,
                                "children": [],
                                "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0].children.[0].children.[0].children.[0]",
                                "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>ul:nth-child(1)>li:nth-child(1)>span:nth-child(1)"
                              }, {
                                "inShadow": false,
                                "nodeName": "ul",
                                "id": "",
                                "classList": ["active"],
                                "ownIndex": 1,
                                "children": [{
                                  "inShadow": false,
                                  "nodeName": "li",
                                  "id": "",
                                  "classList": [],
                                  "ownIndex": 0,
                                  "children": [],
                                  "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0]",
                                  "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>ul:nth-child(1)>li:nth-child(1)>ul:nth-child(2)>li:nth-child(1)"
                                }, {
                                  "inShadow": false,
                                  "nodeName": "li",
                                  "id": "",
                                  "classList": [],
                                  "ownIndex": 1,
                                  "children": [],
                                  "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[1]",
                                  "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>ul:nth-child(1)>li:nth-child(1)>ul:nth-child(2)>li:nth-child(2)"
                                }, {
                                  "inShadow": false,
                                  "nodeName": "li",
                                  "id": "",
                                  "classList": [],
                                  "ownIndex": 2,
                                  "children": [{
                                    "inShadow": false,
                                    "nodeName": "span",
                                    "id": "",
                                    "classList": ["caret"],
                                    "ownIndex": 0,
                                    "children": [],
                                    "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[2].children.[0]",
                                    "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>ul:nth-child(1)>li:nth-child(1)>ul:nth-child(2)>li:nth-child(3)>span:nth-child(1)"
                                  }, {
                                    "inShadow": false,
                                    "nodeName": "ul",
                                    "id": "",
                                    "classList": ["active"],
                                    "ownIndex": 1,
                                    "children": [{
                                      "inShadow": false,
                                      "nodeName": "li",
                                      "id": "",
                                      "classList": [],
                                      "ownIndex": 0,
                                      "children": [],
                                      "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[2].children.[1].children.[0]",
                                      "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>ul:nth-child(1)>li:nth-child(1)>ul:nth-child(2)>li:nth-child(3)>ul:nth-child(2)>li:nth-child(1)"
                                    }, {
                                      "inShadow": false,
                                      "nodeName": "li",
                                      "id": "",
                                      "classList": [],
                                      "ownIndex": 1,
                                      "children": [],
                                      "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[2].children.[1].children.[1]",
                                      "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>ul:nth-child(1)>li:nth-child(1)>ul:nth-child(2)>li:nth-child(3)>ul:nth-child(2)>li:nth-child(2)"
                                    }, {
                                      "inShadow": false,
                                      "nodeName": "li",
                                      "id": "",
                                      "classList": [],
                                      "ownIndex": 2,
                                      "children": [{
                                        "inShadow": false,
                                        "nodeName": "span",
                                        "id": "",
                                        "classList": ["caret"],
                                        "ownIndex": 0,
                                        "children": [],
                                        "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[2].children.[1].children.[2].children.[0]",
                                        "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>ul:nth-child(1)>li:nth-child(1)>ul:nth-child(2)>li:nth-child(3)>ul:nth-child(2)>li:nth-child(3)>span:nth-child(1)"
                                      }, {
                                        "inShadow": false,
                                        "nodeName": "ul",
                                        "id": "",
                                        "classList": ["active"],
                                        "ownIndex": 1,
                                        "children": [{
                                          "inShadow": false,
                                          "nodeName": "li",
                                          "id": "",
                                          "classList": [],
                                          "ownIndex": 0,
                                          "children": [],
                                          "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[2].children.[1].children.[2].children.[1].children.[0]",
                                          "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>ul:nth-child(1)>li:nth-child(1)>ul:nth-child(2)>li:nth-child(3)>ul:nth-child(2)>li:nth-child(3)>ul:nth-child(2)>li:nth-child(1)"
                                        }, {
                                          "inShadow": false,
                                          "nodeName": "li",
                                          "id": "",
                                          "classList": [],
                                          "ownIndex": 1,
                                          "children": [],
                                          "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[2].children.[1].children.[2].children.[1].children.[1]",
                                          "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>ul:nth-child(1)>li:nth-child(1)>ul:nth-child(2)>li:nth-child(3)>ul:nth-child(2)>li:nth-child(3)>ul:nth-child(2)>li:nth-child(2)"
                                        }, {
                                          "inShadow": false,
                                          "nodeName": "li",
                                          "id": "",
                                          "classList": [],
                                          "ownIndex": 2,
                                          "children": [],
                                          "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[2].children.[1].children.[2].children.[1].children.[2]",
                                          "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>ul:nth-child(1)>li:nth-child(1)>ul:nth-child(2)>li:nth-child(3)>ul:nth-child(2)>li:nth-child(3)>ul:nth-child(2)>li:nth-child(3)"
                                        }, {
                                          "inShadow": false,
                                          "nodeName": "li",
                                          "id": "",
                                          "classList": [],
                                          "ownIndex": 3,
                                          "children": [],
                                          "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[2].children.[1].children.[2].children.[1].children.[3]",
                                          "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>ul:nth-child(1)>li:nth-child(1)>ul:nth-child(2)>li:nth-child(3)>ul:nth-child(2)>li:nth-child(3)>ul:nth-child(2)>li:nth-child(4)"
                                        }],
                                        "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[2].children.[1].children.[2].children.[1]",
                                        "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>ul:nth-child(1)>li:nth-child(1)>ul:nth-child(2)>li:nth-child(3)>ul:nth-child(2)>li:nth-child(3)>ul:nth-child(2)"
                                      }],
                                      "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[2].children.[1].children.[2]",
                                      "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>ul:nth-child(1)>li:nth-child(1)>ul:nth-child(2)>li:nth-child(3)>ul:nth-child(2)>li:nth-child(3)"
                                    }],
                                    "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[2].children.[1]",
                                    "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>ul:nth-child(1)>li:nth-child(1)>ul:nth-child(2)>li:nth-child(3)>ul:nth-child(2)"
                                  }],
                                  "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[2]",
                                  "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>ul:nth-child(1)>li:nth-child(1)>ul:nth-child(2)>li:nth-child(3)"
                                }],
                                "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1]",
                                "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>ul:nth-child(1)>li:nth-child(1)>ul:nth-child(2)"
                              }],
                              "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0].children.[0].children.[0]",
                              "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>ul:nth-child(1)>li:nth-child(1)"
                            }],
                            "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0].children.[0]",
                            "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>ul:nth-child(1)"
                          }],
                          "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1].children.[0]",
                          "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)"
                        }],
                        "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1]",
                        "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)"
                      }],
                      "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[0]",
                      "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)"
                    }, {
                      "inShadow": false,
                      "nodeName": "div",
                      "id": "",
                      "classList": ["dragger"],
                      "ownIndex": 1,
                      "children": [],
                      "_ref": "[1].children.[0].children.[1].children.[0].children.[0].children.[1]",
                      "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(2)"
                    }],
                    "_ref": "[1].children.[0].children.[1].children.[0].children.[0]",
                    "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)"
                  }, {
                    "inShadow": false,
                    "nodeName": "div",
                    "id": "",
                    "classList": ["right", "bottom"],
                    "ownIndex": 1,
                    "children": [{
                      "inShadow": false,
                      "nodeName": "div",
                      "id": "",
                      "classList": ["scroll-pane"],
                      "ownIndex": 0,
                      "children": [{
                        "inShadow": false,
                        "nodeName": "div",
                        "id": "",
                        "classList": ["header"],
                        "ownIndex": 0,
                        "children": [{
                          "inShadow": false,
                          "nodeName": "div",
                          "id": "",
                          "classList": ["action-header"],
                          "ownIndex": 0,
                          "children": [{
                            "inShadow": false,
                            "nodeName": "span",
                            "id": "",
                            "classList": ["title"],
                            "ownIndex": 0,
                            "children": [],
                            "_ref": "[1].children.[0].children.[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[0]",
                            "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>span:nth-child(1)"
                          }, {
                            "inShadow": false,
                            "nodeName": "input",
                            "id": "",
                            "classList": ["search"],
                            "name": "",
                            "ownIndex": 1,
                            "children": [],
                            "_ref": "[1].children.[0].children.[1].children.[0].children.[1].children.[0].children.[0].children.[0].children.[1]",
                            "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)>input:nth-child(2)"
                          }],
                          "_ref": "[1].children.[0].children.[1].children.[0].children.[1].children.[0].children.[0].children.[0]",
                          "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)>div:nth-child(1)"
                        }],
                        "_ref": "[1].children.[0].children.[1].children.[0].children.[1].children.[0].children.[0]",
                        "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(1)"
                      }, {
                        "inShadow": false,
                        "nodeName": "div",
                        "id": "",
                        "classList": ["scroll"],
                        "ownIndex": 1,
                        "children": [{
                          "inShadow": false,
                          "nodeName": "section",
                          "id": "",
                          "classList": ["notice"],
                          "ownIndex": 0,
                          "children": [{
                            "inShadow": false,
                            "nodeName": "div",
                            "id": "",
                            "classList": [],
                            "ownIndex": 0,
                            "children": [],
                            "_ref": "[1].children.[0].children.[1].children.[0].children.[1].children.[0].children.[1].children.[0].children.[0]",
                            "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>section:nth-child(1)>div:nth-child(1)"
                          }],
                          "_ref": "[1].children.[0].children.[1].children.[0].children.[1].children.[0].children.[1].children.[0]",
                          "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>section:nth-child(1)"
                        }],
                        "_ref": "[1].children.[0].children.[1].children.[0].children.[1].children.[0].children.[1]",
                        "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)"
                      }],
                      "_ref": "[1].children.[0].children.[1].children.[0].children.[1].children.[0]",
                      "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)"
                    }],
                    "_ref": "[1].children.[0].children.[1].children.[0].children.[1]",
                    "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)"
                  }],
                  "_ref": "[1].children.[0].children.[1].children.[0]",
                  "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)>div:nth-child(1)"
                }],
                "_ref": "[1].children.[0].children.[1]",
                "_selector": "body>div:nth-child(2)>div:nth-child(1)>div:nth-child(2)"
              }], "_ref": "[1].children.[0]", "_selector": "body>div:nth-child(2)>div:nth-child(1)"
            }], "_ref": "[1]", "_selector": "body>div:nth-child(2)"
          },
          {
            "inShadow": false,
            "nodeName": "div",
            "id": "app",
            "classList": [],
            "ownIndex": 2,
            "children": [{
              "inShadow": false,
              "nodeName": "p",
              "id": "",
              "classList": [],
              "ownIndex": 0,
              "children": [],
              "_ref": "[2].children.[0]",
              "_selector": "body>div:nth-child(3)>p:nth-child(1)"
            }],
            "_ref": "[2]",
            "_selector": "body>div:nth-child(3)"
          }]
      };
    }

    firstUpdated() {
      // Set the dimensions and margins of the chart
      const margin = { top: 20, right: 90, bottom: 30, left: 90 };
      const size = 500;

      this.width = size - margin.left - margin.right;
      this.height = size - margin.top - margin.bottom;
      this.margin = margin;

      renderChart({
        treeData: this.data,
        margin: this.margin,
        width: this.width,
        height: this.height,
        parentElement: this.shadowRoot.querySelector('#chart')
      });
    }

    render() {
      return html`<div id="chart" style="border: 1px solid red;"></div>`
    }
  }

  customElements.define('component-tree-chart', ComponentTreeChart);
</script>
</body>

</html>
